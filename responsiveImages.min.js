jQuery(function(t){(new function(){this.window_width=0,this.dataImgTag="data-img-sizes",this.dataImgWebPTag="data-img-sizes-webp",this.isWebP=!1,this.init=function(){var i=this,a=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./),e=a?parseInt(a[1]):0;(i.canUseWebp()||e>=65)&&(i.isWebP=!0),i.isWebP?(t("body ["+i.dataImgWebPTag+"]").each(function(){i.countSizes(i,this)}),t("body ["+i.dataImgTag+"]").not("body ["+i.dataImgWebPTag+"]").each(function(){i.countSizes(i,this)})):t("body ["+i.dataImgTag+"]").each(function(){i.countSizes(i,this)}),i.resizeWindow(i),t(window).on("resize",function(){i.resizeWindow(i)})},this.canUseWebp=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0==t.toDataURL("image/webp").indexOf("data:image/webp")},this.resizeWindow=function(i){i.window_width=document.body.clientWidth,i.isWebP?(t("body ["+i.dataImgWebPTag+"]").each(function(){i.resizeImg(i,this)}),t("body ["+i.dataImgTag+"]").not("body ["+i.dataImgWebPTag+"]").each(function(){i.resizeImg(i,this)})):t("body ["+i.dataImgTag+"]").each(function(){i.resizeImg(i,this)})},this.countSizes=function(i,a){var e=t(a).attr(i.dataImgTag);if(i.isWebP){var n=t(a).attr(i.dataImgWebPTag);n&&(e=n)}(e=i.getSizes(e))&&t.data(a,"sizes",JSON.stringify(e))},this.getSizes=function(t){var i={},a=[];if(t&&(t=t.split(", "))&&t.length)for(var e in t){var n=t[e].split(" ");n&&n.length>0&&(n.length>1?a[parseInt(n[1])]=n[0]:a[0]=n[0])}for(var s in a)i[s]=a[s];return i},this.getImg=function(t,i){var a="";i[0]&&(a=i[0]);var e="";for(var n in i){if(parseInt(n)>t.window_width){a=i[n];break}e=i[n]}return""==a&&(a=e),a},this.resizeImg=function(i,a){var e=t.data(a,"sizes");if(e){var n=i.getImg(i,JSON.parse(e)),s=new Image;s.src=n,s.onload=function(){"IMG"==t(a).tagName?t(a).attr("src",n):t(a).css("backgroundImage","url("+n+")")}}}}).init()});
